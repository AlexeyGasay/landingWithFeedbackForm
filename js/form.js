"use strict";for(var form=document.querySelector("form"),sendBtn=document.getElementById("feedback__send_btn"),formInputs=[],i=0;i<form.length;i++){var element=form[i];element.classList.contains("feedback__form_input")&&formInputs.push(element)}var validEmail=!1;function validate(e){var a=e.target.value;a<=0?e.target.classList.add("invalid_data"):e.target.classList.remove("invalid_data");"email"==e.target.name&&(validEmail=a.match(/^[^ ]+@[^ ]+\.[a-z]{2,3}$/)?(e.target.classList.remove("invalid_data"),!0):(e.target.classList.add("invalid_data"),!1))}function sendData(){for(var e=formInputs.length,a=0,t=0;t<formInputs.length;t++){0<formInputs[t].value.length&&(a+=1)}if(!validEmail||a!=e)return alert("Что-то не так");alert("Все в порядке");for(var n={name:"",email:"",subject:"",message:""},s=0;s<formInputs.length;s++){var i=formInputs[s];switch(i.name){case"name":n.name=i.value;case"email":n.email=i.value;case"subject":n.subject=i.value;case"message":n.message=i.value}}fetch("https://secret-taiga-20525.herokuapp.com/api/application",{body:JSON.stringify(n),method:"POST",headers:{"Content-Type":"application/json"}}).then(function(e){e.json(),400==e.status&&alert("Заявка с таким email уже существует")})}form.addEventListener("input",validate),form.addEventListener("click",validate),sendBtn.addEventListener("click",sendData);
//# sourceMappingURL=form.js.map
